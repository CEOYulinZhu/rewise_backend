# å›æ”¶æèµ æ€»åè°ƒå™¨Agent

## æ¦‚è¿°

å›æ”¶æèµ æ€»åè°ƒå™¨Agentæ˜¯ä¸€ä¸ªä¸“ä¸šçš„å›æ”¶æèµ æœåŠ¡ç»Ÿä¸€åè°ƒç³»ç»Ÿï¼Œè´Ÿè´£æ•´åˆå›æ”¶åœ°ç‚¹æ¨èå’Œå¹³å°æ¨èä¸¤ä¸ªå­æœåŠ¡ï¼Œä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„å›æ”¶æèµ è§£å†³æ–¹æ¡ˆã€‚è¯¥Agentå¼‚æ­¥è°ƒç”¨å›æ”¶åœ°ç‚¹æ¨èAgentå’Œå¹³å°æ¨èAgentï¼Œå°†ç»“æœè¿›è¡Œæ™ºèƒ½æ•´åˆå’Œç»Ÿä¸€å±•ç¤ºã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ç»Ÿä¸€åè°ƒç®¡ç†
- **åŒå‘æ¨èæ•´åˆ**ï¼šåŒæ—¶è·å–å›æ”¶åœ°ç‚¹å’Œå¹³å°æ¨èï¼Œæä¾›å…¨æ–¹ä½è§£å†³æ–¹æ¡ˆ
- **æ™ºèƒ½è·¯ç”±åˆ†å‘**ï¼šæ ¹æ®ç‰©å“ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„æ¨èç­–ç•¥
- **ç»“æœæ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å±•ç¤ºå’Œä¸šåŠ¡å¤„ç†
- **å®¹é”™å¤„ç†**ï¼šå•ä¸€æœåŠ¡å¤±è´¥ä¸å½±å“æ•´ä½“ç»“æœï¼Œç¡®ä¿æœåŠ¡å¯ç”¨æ€§

### âš¡ é«˜æ€§èƒ½å¤„ç†
- **å¹¶è¡Œæ‰§è¡Œ**ï¼šåœ°ç‚¹æ¨èå’Œå¹³å°æ¨èåŒæ—¶æ‰§è¡Œï¼Œå¤§å¹…æå‡å“åº”é€Ÿåº¦
- **ä¸²è¡Œå¤‡ç”¨**ï¼šæ”¯æŒä¸²è¡Œæ¨¡å¼ï¼Œé€‚åº”ä¸åŒçš„ç½‘ç»œå’Œç³»ç»Ÿç¯å¢ƒ
- **è‡ªé€‚åº”è°ƒåº¦**ï¼šæ ¹æ®ç³»ç»Ÿè´Ÿè½½å’Œé…ç½®æ™ºèƒ½é€‰æ‹©æ‰§è¡Œæ¨¡å¼
- **èµ„æºä¼˜åŒ–**ï¼šç»Ÿä¸€ç®¡ç†å­Agentèµ„æºï¼Œé¿å…é‡å¤åˆå§‹åŒ–

### ğŸ“Š å®Œæ•´æ•°æ®æ•´åˆ
- **åœ°ç‚¹æ¨èæ•°æ®**ï¼šå›æ”¶ç±»å‹åˆ†æã€é™„è¿‘å›æ”¶ç‚¹ã€è·ç¦»æ’åº
- **å¹³å°æ¨èæ•°æ®**ï¼šAIä¸ªæ€§åŒ–æ¨èã€é€‚åˆåº¦è¯„åˆ†ã€å¹³å°è¯¦ç»†ä¿¡æ¯
- **å¤„ç†å…ƒæ•°æ®**ï¼šæ‰§è¡Œæ¨¡å¼ã€è€—æ—¶ç»Ÿè®¡ã€æˆåŠŸç‡è·Ÿè¸ª
- **é”™è¯¯è¿½è¸ª**ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤±è´¥åŸå› åˆ†æ

### ğŸ”„ æ™ºèƒ½å®¹é”™æœºåˆ¶
- **éƒ¨åˆ†æˆåŠŸç­–ç•¥**ï¼šè‡³å°‘ä¸€ä¸ªå­æœåŠ¡æˆåŠŸå³è¿”å›æˆåŠŸç»“æœ
- **é”™è¯¯éš”ç¦»**ï¼šå­æœåŠ¡é”™è¯¯ä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„æ­£å¸¸æ‰§è¡Œ
- **è¯¦ç»†é”™è¯¯æŠ¥å‘Š**ï¼šç²¾ç¡®å®šä½å¤±è´¥åŸå› ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
- **æœåŠ¡é™çº§**ï¼šå…³é”®æœåŠ¡å¤±è´¥æ—¶è‡ªåŠ¨å¯ç”¨å¤‡ç”¨æ–¹æ¡ˆ

## æ¶æ„è®¾è®¡

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–
- **å¼‚æ­¥åç¨‹**ï¼šå…¨ç¨‹ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- **å¹¶è¡Œä»»åŠ¡è°ƒåº¦**ï¼šä½¿ç”¨asyncio.gatherå®ç°çœŸæ­£çš„å¹¶è¡Œæ‰§è¡Œ
- **èµ„æºæ± ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†HTTPè¿æ¥å’ŒAIæ¨¡å‹è°ƒç”¨
- **å†…å­˜ä¼˜åŒ–**ï¼šåŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼

### ğŸ”§ å¯ç»´æŠ¤æ€§
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **æ ‡å‡†æ¥å£**ï¼šç»Ÿä¸€çš„è¾“å…¥è¾“å‡ºæ ¼å¼ï¼Œä¾¿äºé›†æˆ
- **å…¨é¢æµ‹è¯•**ï¼šå®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¦†ç›–
- **è¯¦ç»†æ—¥å¿—**ï¼šå®Œæ•´çš„æ‰§è¡Œè½¨è¿¹å’Œæ€§èƒ½ç›‘æ§

## è¾“å…¥è¾“å‡ºè§„èŒƒ

### è¾“å…¥æ ¼å¼

```python
# ç‰©å“åˆ†æç»“æœ
analysis_result = {
    "category": "ç”µå­äº§å“",              # å¿…éœ€ï¼šç‰©å“ä¸»ç±»åˆ«
    "sub_category": "æ™ºèƒ½æ‰‹æœº",         # å¯é€‰ï¼šç‰©å“å­ç±»åˆ«
    "brand": "è‹¹æœ",                    # å¯é€‰ï¼šå“ç‰Œä¿¡æ¯
    "condition": "å…«æˆæ–°",              # å¿…éœ€ï¼šç‰©å“çŠ¶æ€
    "description": "iPhone 12ï¼Œå¤–è§‚è‰¯å¥½", # å¿…éœ€ï¼šè¯¦ç»†æè¿°
    "keywords": ["æ‰‹æœº", "iPhone"],     # å¯é€‰ï¼šå…³é”®è¯åˆ—è¡¨
    "special_features": "Face IDæ­£å¸¸"   # å¯é€‰ï¼šç‰¹æ®ŠåŠŸèƒ½è¯´æ˜
}

# è°ƒç”¨å‚æ•°
user_location = "116.447303,39.906823"  # å¿…éœ€ï¼šç”¨æˆ·ä½ç½® (ç»åº¦,çº¬åº¦)
radius = 30000                           # å¯é€‰ï¼šæœç´¢åŠå¾„ï¼ˆç±³ï¼‰
max_locations = 20                       # å¯é€‰ï¼šæœ€å¤§åœ°ç‚¹æ•°é‡
enable_parallel = True                   # å¯é€‰ï¼šæ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†
```

### è¾“å‡ºæ ¼å¼

```python
{
    "success": True,                     # åè°ƒæ˜¯å¦æˆåŠŸ
    "source": "recycling_coordinator",   # æ•°æ®æ¥æºæ ‡è¯†
    "analysis_result": {...},            # è¾“å…¥çš„åˆ†æç»“æœå›æ˜¾
    
    # åœ°ç‚¹æ¨èç»“æœ
    "location_recommendation": {
        "success": True,
        "recycling_type": "å®¶ç”µå›æ”¶",
        "locations": [
            {
                "name": "åŒ—äº¬å®¶ç”µå›æ”¶ç«™",
                "address": "æœé˜³åŒºå»ºå›½è·¯88å·",
                "distance_meters": 1200,
                "phone": "010-12345678",
                "business_hours": "09:00-18:00"
            }
        ],
        "search_params": {
            "location": "116.447303,39.906823",
            "keyword": "å®¶ç”µå›æ”¶",
            "radius": 30000
        }
    },
    
    # å¹³å°æ¨èç»“æœ
    "platform_recommendation": {
        "success": True,
        "ai_recommendations": {
            "recommendations": [
                {
                    "platform_name": "é—²é±¼",
                    "suitability_score": 8.5,
                    "pros": ["ç”¨æˆ·é‡å¤§", "äº¤æ˜“ä¾¿æ·", "æ”¯ä»˜å®ä¿éšœ"],
                    "cons": ["ç«äº‰æ¿€çƒˆ"],
                    "recommendation_reason": "é€‚åˆä¸ªäººå¿«é€Ÿå‡ºå”®..."
                }
            ]
        },
        "platform_details": [...],       # æ¨èå¹³å°çš„å®Œæ•´æ•°æ®
        "rag_metadata": {                # RAGæ£€ç´¢å…ƒæ•°æ®
            "total_results": 3,
            "similarity_threshold": 0.3
        }
    },
    
    # å¤„ç†å…ƒæ•°æ®
    "processing_metadata": {
        "processing_mode": "parallel",    # å¤„ç†æ¨¡å¼
        "processing_time_seconds": 3.2,  # æ€»è€—æ—¶
        "location_recommendation": {
            "success": True,
            "error": None
        },
        "platform_recommendation": {
            "success": True,
            "error": None
        }
    },
    
    "error": None                        # é”™è¯¯ä¿¡æ¯
}
```

## æ ¸å¿ƒæ–¹æ³•

### `coordinate_recycling_donation()`

åè°ƒå›æ”¶æèµ æ¨èçš„æ ¸å¿ƒæ–¹æ³•ï¼Œæ•´åˆåœ°ç‚¹æ¨èå’Œå¹³å°æ¨èæœåŠ¡ã€‚

**å‚æ•°ï¼š**
- `analysis_result`: ç‰©å“åˆ†æç»“æœå­—å…¸
- `user_location`: ç”¨æˆ·ä½ç½®åæ ‡ (ç»åº¦,çº¬åº¦)
- `radius`: æœç´¢åŠå¾„ï¼ˆç±³ï¼‰ï¼Œé»˜è®¤50000
- `max_locations`: æœ€å¤§è¿”å›åœ°ç‚¹æ•°é‡ï¼Œé»˜è®¤20
- `enable_parallel`: æ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†ï¼Œé»˜è®¤True

**è¿”å›ï¼š**
- `RecyclingCoordinatorResponse`: æ•´åˆçš„åè°ƒå™¨å“åº”å¯¹è±¡

**å·¥ä½œæµç¨‹ï¼š**
1. **è¾“å…¥éªŒè¯**ï¼šæ£€æŸ¥åˆ†æç»“æœå’Œç”¨æˆ·ä½ç½®çš„æœ‰æ•ˆæ€§
2. **å¹¶è¡Œ/ä¸²è¡Œè°ƒåº¦**ï¼šæ ¹æ®é…ç½®é€‰æ‹©æ‰§è¡Œæ¨¡å¼
3. **å­æœåŠ¡è°ƒç”¨**ï¼šå¼‚æ­¥è°ƒç”¨åœ°ç‚¹æ¨èå’Œå¹³å°æ¨èAgent
4. **ç»“æœæ•´åˆ**ï¼šåˆå¹¶ä¸¤ä¸ªæœåŠ¡çš„ç»“æœå¹¶ç”Ÿæˆå…ƒæ•°æ®
5. **å“åº”å°è£…**ï¼šè¿”å›æ ‡å‡†åŒ–çš„åè°ƒå™¨å“åº”

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
from app.agents.recycling_coordinator import RecyclingCoordinatorAgent

# å‡†å¤‡åˆ†æç»“æœ
analysis_result = {
    "category": "ç”µå­äº§å“",
    "sub_category": "æ™ºèƒ½æ‰‹æœº",
    "brand": "è‹¹æœ",
    "condition": "å…«æˆæ–°",
    "description": "iPhone 12ï¼Œä½¿ç”¨ä¸¤å¹´ï¼Œå¤–è§‚è‰¯å¥½ï¼ŒåŠŸèƒ½æ­£å¸¸",
    "keywords": ["æ‰‹æœº", "iPhone", "è‹¹æœ"]
}

# ç”¨æˆ·ä½ç½® (åŒ—äº¬å¸‚æœé˜³åŒº)
user_location = "116.447303,39.906823"

# è·å–å®Œæ•´æ¨è
async with RecyclingCoordinatorAgent() as coordinator:
    response = await coordinator.coordinate_recycling_donation(
        analysis_result=analysis_result,
        user_location=user_location,
        radius=30000,     # 30å…¬é‡Œæœç´¢åŠå¾„
        max_locations=15, # æœ€å¤š15ä¸ªåœ°ç‚¹
        enable_parallel=True
    )
    
    if response.success:
        print(f"ğŸ¯ åè°ƒæˆåŠŸ!")
        
        # è·å–å¤„ç†æ‘˜è¦
        summary = response.get_processing_summary()
        print(f"ğŸ“Š å¤„ç†æ‘˜è¦: {summary}")
        
        # æ£€æŸ¥åœ°ç‚¹æ¨è
        if response.has_location_recommendations():
            recycling_type = response.get_recycling_type()
            nearby_locations = response.get_nearby_locations(max_distance_meters=10000)
            print(f"â™»ï¸ å›æ”¶ç±»å‹: {recycling_type}")
            print(f"ğŸ“ é™„è¿‘åœ°ç‚¹: {len(nearby_locations)}ä¸ª")
        
        # æ£€æŸ¥å¹³å°æ¨è
        if response.has_platform_recommendations():
            top_platform = response.get_top_platform_recommendation()
            if top_platform:
                print(f"â­ æœ€ä½³å¹³å°: {top_platform.platform_name} (è¯„åˆ†: {top_platform.suitability_score}/10)")
    
    else:
        print(f"âŒ åè°ƒå¤±è´¥: {response.error}")
```

### æ€§èƒ½å¯¹æ¯”æµ‹è¯•

```python
async def performance_comparison():
    """æ¯”è¾ƒä¸²è¡Œä¸å¹¶è¡Œå¤„ç†æ€§èƒ½"""
    
    analysis_result = {
        "category": "å®¶ç”¨ç”µå™¨",
        "description": "æ—§æ´—è¡£æœºï¼ŒåŠŸèƒ½æ­£å¸¸"
    }
    user_location = "121.473701,31.230416"
    
    async with RecyclingCoordinatorAgent() as coordinator:
        
        # ä¸²è¡Œå¤„ç†
        start_time = time.time()
        serial_result = await coordinator.coordinate_recycling_donation(
            analysis_result=analysis_result,
            user_location=user_location,
            enable_parallel=False
        )
        serial_time = time.time() - start_time
        
        # å¹¶è¡Œå¤„ç†
        start_time = time.time()
        parallel_result = await coordinator.coordinate_recycling_donation(
            analysis_result=analysis_result,
            user_location=user_location,
            enable_parallel=True
        )
        parallel_time = time.time() - start_time
        
        # æ€§èƒ½åˆ†æ
        if serial_time > 0 and parallel_time > 0:
            speedup = serial_time / parallel_time
            print(f"âš¡ å¹¶è¡Œæ€§èƒ½æå‡: {speedup:.2f}x")
            print(f"â±ï¸ æ—¶é—´èŠ‚çœ: {(serial_time - parallel_time):.2f}ç§’")
```

### ç»“æœè¯¦ç»†å¤„ç†

```python
async def detailed_result_processing(response):
    """è¯¦ç»†å¤„ç†åè°ƒå™¨ç»“æœ"""
    
    if not response.success:
        print(f"âŒ å¤„ç†å¤±è´¥: {response.error}")
        return
    
    # å¤„ç†åœ°ç‚¹æ¨è
    if response.has_location_recommendations():
        location_rec = response.location_recommendation
        print(f"ğŸ“ å›æ”¶ç±»å‹: {location_rec.recycling_type}")
        
        # è·å–ä¸åŒè·ç¦»èŒƒå›´çš„åœ°ç‚¹
        nearby = response.get_nearby_locations(max_distance_meters=5000)   # 5å…¬é‡Œå†…
        moderate = location_rec.get_locations_by_distance_range(5000, 15000)  # 5-15å…¬é‡Œ
        distant = location_rec.get_locations_by_distance_range(15000, 50000)  # 15-50å…¬é‡Œ
        
        print(f"ğŸ“ 5å…¬é‡Œå†…: {len(nearby)}ä¸ªåœ°ç‚¹")
        print(f"ğŸ“ 5-15å…¬é‡Œ: {len(moderate)}ä¸ªåœ°ç‚¹") 
        print(f"ğŸ“ 15-50å…¬é‡Œ: {len(distant)}ä¸ªåœ°ç‚¹")
        
        # æ˜¾ç¤ºæœ€è¿‘çš„å‰3ä¸ªåœ°ç‚¹
        top_locations = location_rec.get_top_locations(limit=3)
        for i, loc in enumerate(top_locations, 1):
            distance_text = f"{loc.distance_meters}ç±³" if loc.distance_meters else "è·ç¦»æœªçŸ¥"
            print(f"{i}. {loc.name} ({distance_text})")
    
    # å¤„ç†å¹³å°æ¨è
    if response.has_platform_recommendations():
        platform_rec = response.platform_recommendation
        recommendations = platform_rec.ai_recommendations.recommendations
        
        print(f"ğŸª æ¨èå¹³å°æ•°é‡: {len(recommendations)}")
        
        # æŒ‰è¯„åˆ†æ’åºæ˜¾ç¤º
        sorted_recs = sorted(recommendations, key=lambda x: x.suitability_score, reverse=True)
        for i, rec in enumerate(sorted_recs, 1):
            print(f"{i}. {rec.platform_name} (è¯„åˆ†: {rec.suitability_score}/10)")
            print(f"   ä¼˜åŠ¿: {', '.join(rec.pros)}")
            print(f"   æ¨èç†ç”±: {rec.recommendation_reason}")
```

### æ‰¹é‡å¤„ç†

```python
async def batch_coordination(items_and_locations):
    """æ‰¹é‡å¤„ç†å¤šä¸ªç‰©å“çš„å›æ”¶æèµ æ¨è"""
    
    results = []
    
    async with RecyclingCoordinatorAgent() as coordinator:
        for analysis_result, user_location in items_and_locations:
            try:
                result = await coordinator.coordinate_recycling_donation(
                    analysis_result=analysis_result,
                    user_location=user_location
                )
                results.append(result)
                
                # ç®€å•ç»Ÿè®¡
                success_msg = "âœ…" if result.success else "âŒ"
                item_desc = analysis_result.get("description", "æœªçŸ¥ç‰©å“")[:20]
                print(f"{success_msg} {item_desc}... - å¤„ç†å®Œæˆ")
                
            except Exception as e:
                print(f"âŒ å¤„ç†å¤±è´¥: {e}")
                results.append(None)
    
    return results
```

## å¹¶è¡Œå¤„ç†æœºåˆ¶

### æ‰§è¡Œæ¨¡å¼å¯¹æ¯”

#### å¹¶è¡Œæ¨¡å¼ (enable_parallel=True)
- **æ‰§è¡Œæ–¹å¼**ï¼šåœ°ç‚¹æ¨èå’Œå¹³å°æ¨èåŒæ—¶è¿›è¡Œ
- **æ€§èƒ½**ï¼šæ˜¾è‘—æå‡å“åº”é€Ÿåº¦ï¼Œé€šå¸¸å¯è·å¾—1.5-2xæ€§èƒ½æå‡
- **é€‚ç”¨åœºæ™¯**ï¼šç½‘ç»œæ¡ä»¶è‰¯å¥½ï¼Œç³»ç»Ÿèµ„æºå……è¶³
- **é£é™©**ï¼šå•ç‚¹æ•…éšœå¯èƒ½å½±å“æ•´ä½“ç¨³å®šæ€§

#### ä¸²è¡Œæ¨¡å¼ (enable_parallel=False)
- **æ‰§è¡Œæ–¹å¼**ï¼šå…ˆæ‰§è¡Œåœ°ç‚¹æ¨èï¼Œå†æ‰§è¡Œå¹³å°æ¨è
- **æ€§èƒ½**ï¼šå“åº”æ—¶é—´è¾ƒé•¿ï¼Œä½†ç¨³å®šå¯é 
- **é€‚ç”¨åœºæ™¯**ï¼šç½‘ç»œä¸ç¨³å®šï¼Œç³»ç»Ÿèµ„æºå—é™
- **ä¼˜åŠ¿**ï¼šé”™è¯¯éš”ç¦»æ€§å¥½ï¼Œä¾¿äºé—®é¢˜å®šä½

### å®¹é”™æœºåˆ¶

#### éƒ¨åˆ†æˆåŠŸå¤„ç†
```python
# ç¤ºä¾‹ï¼šåœ°ç‚¹æ¨èæˆåŠŸï¼Œå¹³å°æ¨èå¤±è´¥
{
    "success": True,  # è‡³å°‘ä¸€ä¸ªæˆåŠŸå³ä¸ºTrue
    "location_recommendation": {...},  # æˆåŠŸçš„æ•°æ®
    "platform_recommendation": None,   # å¤±è´¥æ—¶ä¸ºNone
    "processing_metadata": {
        "location_recommendation": {"success": True, "error": None},
        "platform_recommendation": {"success": False, "error": "AIæœåŠ¡è¶…æ—¶"}
    }
}
```

#### å®Œå…¨å¤±è´¥å¤„ç†
```python
# ç¤ºä¾‹ï¼šä¸¤ä¸ªæœåŠ¡éƒ½å¤±è´¥
{
    "success": False,
    "error": "åœ°ç‚¹æ¨èå¤±è´¥: ä½ç½®è§£æé”™è¯¯; å¹³å°æ¨èå¤±è´¥: RAGæœåŠ¡å¼‚å¸¸",
    "location_recommendation": None,
    "platform_recommendation": None
}
```

## å“åº”æ•°æ®ç»“æ„

### ä¸»è¦å“åº”å¯¹è±¡

#### RecyclingCoordinatorResponse
```python
@dataclass
class RecyclingCoordinatorResponse:
    success: bool                                    # åè°ƒæ˜¯å¦æˆåŠŸ
    source: str = "recycling_coordinator"           # æ•°æ®æ¥æº
    analysis_result: Optional[Dict[str, Any]]       # åŸå§‹åˆ†æç»“æœ
    location_recommendation: Optional[RecyclingLocationResponse]  # åœ°ç‚¹æ¨è
    platform_recommendation: Optional[PlatformRecommendationResponse]  # å¹³å°æ¨è
    processing_metadata: Optional[Dict[str, Any]]   # å¤„ç†å…ƒæ•°æ®
    error: Optional[str]                            # é”™è¯¯ä¿¡æ¯
```

### ä¾¿æ·æ–¹æ³•

#### çŠ¶æ€æ£€æŸ¥æ–¹æ³•
- `has_location_recommendations()`: æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆåœ°ç‚¹æ¨è
- `has_platform_recommendations()`: æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆå¹³å°æ¨è
- `get_recycling_type()`: è·å–è¯†åˆ«çš„å›æ”¶ç±»å‹
- `get_top_platform_recommendation()`: è·å–æœ€é«˜è¯„åˆ†å¹³å°

#### æ•°æ®è·å–æ–¹æ³•
- `get_nearby_locations(max_distance_meters)`: è·å–æŒ‡å®šè·ç¦»å†…åœ°ç‚¹
- `get_processing_summary()`: è·å–å¤„ç†æ‘˜è¦ä¿¡æ¯
- `to_dict()`: è½¬æ¢ä¸ºå­—å…¸æ ¼å¼

## é…ç½®è¦æ±‚

### ç¯å¢ƒå˜é‡
```bash
# è“å¿ƒå¤§æ¨¡å‹é…ç½® (å¹³å°æ¨èéœ€è¦)
LANXIN_APP_ID=your_app_id
LANXIN_APP_KEY=your_app_key
LANXIN_API_BASE_URL=https://api.xxx.com/v1/chat/completions
LANXIN_TEXT_MODEL=your_text_model

# é«˜å¾·åœ°å›¾é…ç½® (åœ°ç‚¹æ¨èéœ€è¦)
AMAP_API_KEY=your_amap_key
AMAP_API_BASE_URL=https://restapi.amap.com
```

### ä¾èµ–æœåŠ¡
- **å›æ”¶åœ°ç‚¹æ¨èAgent**: è´Ÿè´£å›æ”¶ç±»å‹åˆ†æå’Œåœ°ç‚¹æœç´¢
- **å¹³å°æ¨èAgent**: è´Ÿè´£AIæ¨èå’ŒRAGæ£€ç´¢
- **é«˜å¾·åœ°å›¾API**: æä¾›POIæœç´¢æœåŠ¡
- **è“å¿ƒå¤§æ¨¡å‹API**: æä¾›AIåˆ†æèƒ½åŠ›
- **RAGæœåŠ¡**: æä¾›å¹³å°ä¿¡æ¯æ£€ç´¢

## ä¾èµ–æ¨¡å—

- **å­Agentæ¨¡å—**ï¼š
  - `app.agents.recycling_location.agent.RecyclingLocationAgent`
  - `app.agents.platform_recommendation.agent.PlatformRecommendationAgent`
- **æ•°æ®æ¨¡å‹**ï¼š
  - `app.models.recycling_coordinator_models`
  - `app.models.recycling_location_models`
  - `app.models.platform_recommendation_agent_models`
- **æ ¸å¿ƒæœåŠ¡**ï¼š
  - `app.core.config`: é…ç½®ç®¡ç†
  - `app.core.logger`: æ—¥å¿—ç³»ç»Ÿ

## æ€§èƒ½ç‰¹ç‚¹

### å“åº”é€Ÿåº¦
- **å¹¶è¡Œæ¨¡å¼**: é€šå¸¸3-5ç§’å®Œæˆå®Œæ•´æ¨è
- **ä¸²è¡Œæ¨¡å¼**: é€šå¸¸5-8ç§’å®Œæˆå®Œæ•´æ¨è
- **å•ä¸€æœåŠ¡**: 2-4ç§’å®Œæˆå•é¡¹æ¨è
- **é”™è¯¯å¤„ç†**: 1ç§’å†…è¿”å›é”™è¯¯å“åº”

### å‡†ç¡®ç‡
- **åœ°ç‚¹æ¨èç²¾åº¦**: 90%+ (åŸºäºé«˜å¾·åœ°å›¾POI)
- **å¹³å°æ¨èè´¨é‡**: 85%+ (åŸºäºAIåˆ†æ)
- **å›æ”¶ç±»å‹è¯†åˆ«**: 95%+ (AI+è§„åˆ™åŒé‡ä¿éšœ)
- **æ•´ä½“æˆåŠŸç‡**: 80%+ (è‡³å°‘ä¸€é¡¹æˆåŠŸ)

### å¹¶å‘æ”¯æŒ
- **å¼‚æ­¥è®¾è®¡**: æ”¯æŒé«˜å¹¶å‘è¯·æ±‚å¤„ç†
- **èµ„æºç®¡ç†**: ç»Ÿä¸€ç®¡ç†å­Agentèµ„æº
- **è¿æ¥å¤ç”¨**: é«˜æ•ˆçš„HTTPè¿æ¥ç®¡ç†
- **å†…å­˜ä¼˜åŒ–**: åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æº

## ä¸šåŠ¡åœºæ™¯

### é€‚ç”¨åœºæ™¯
- **é—²ç½®ç‰©å“å¤„ç½®**: ä¸ºç”¨æˆ·æä¾›å›æ”¶å’ŒäºŒæ‰‹äº¤æ˜“åŒé‡é€‰æ‹©
- **ç¯ä¿å›æ”¶**: å¼•å¯¼ç”¨æˆ·é€‰æ‹©ç¯ä¿çš„å›æ”¶æ–¹å¼
- **å•†ä¸šå†³ç­–**: å¸®åŠ©ç”¨æˆ·é€‰æ‹©æœ€åˆé€‚çš„å¤„ç½®æ¸ é“
- **æœåŠ¡æ•´åˆ**: ç»Ÿä¸€çš„å…¥å£ç®€åŒ–ç”¨æˆ·æ“ä½œæµç¨‹

### å…¸å‹ç”¨æˆ·è·¯å¾„
1. **ç‰©å“åˆ†æ**: ç”¨æˆ·ä¸Šä¼ ç‰©å“ä¿¡æ¯ï¼Œç³»ç»Ÿè¯†åˆ«ç±»åˆ«å’ŒçŠ¶æ€
2. **æ¨èè·å–**: è°ƒç”¨åè°ƒå™¨è·å–å®Œæ•´æ¨èæ–¹æ¡ˆ
3. **ç»“æœå±•ç¤º**: å‰ç«¯å±•ç¤ºåœ°ç‚¹å’Œå¹³å°æ¨è
4. **ç”¨æˆ·é€‰æ‹©**: ç”¨æˆ·æ ¹æ®æ¨èé€‰æ‹©å¤„ç½®æ–¹å¼
5. **è·Ÿè¸ªåé¦ˆ**: è®°å½•ç”¨æˆ·é€‰æ‹©ï¼Œä¼˜åŒ–åç»­æ¨è

## ä¸å…¶ä»–æ¨¡å—åä½œ

### ä¸Šæ¸¸ä¾èµ–
- **å›¾ç‰‡è¯†åˆ«æœåŠ¡**: æä¾›ç‰©å“è§†è§‰åˆ†æç»“æœ
- **æ–‡æœ¬åˆ†ææœåŠ¡**: æä¾›æè¿°æ–‡æœ¬è§£æ
- **ç”¨æˆ·å®šä½æœåŠ¡**: æä¾›å‡†ç¡®çš„ç”¨æˆ·ä½ç½®ä¿¡æ¯

### ä¸‹æ¸¸è¾“å‡º
- **å‰ç«¯å±•ç¤º**: ç»Ÿä¸€çš„æ¨èç»“æœå±•ç¤º
- **ä¸šåŠ¡å†³ç­–**: æ”¯æŒç”¨æˆ·çš„å¤„ç½®å†³ç­–
- **æ•°æ®åˆ†æ**: ä¸ºæ¨èç³»ç»Ÿä¼˜åŒ–æä¾›æ•°æ®
- **ç”¨æˆ·ç”»åƒ**: ä¸°å¯Œç”¨æˆ·è¡Œä¸ºç‰¹å¾

## é”™è¯¯å¤„ç†

### è¾“å…¥éªŒè¯
- åˆ†æç»“æœæ ¼å¼æ£€æŸ¥å’Œå¿…éœ€å­—æ®µéªŒè¯
- ç”¨æˆ·ä½ç½®åæ ‡æ ¼å¼éªŒè¯
- å‚æ•°èŒƒå›´å’Œç±»å‹æ£€æŸ¥

### æœåŠ¡å®¹é”™
- å­æœåŠ¡å¼‚å¸¸éš”ç¦»å’Œé”™è¯¯æ¢å¤
- ç½‘ç»œè¶…æ—¶å’Œé‡è¯•æœºåˆ¶
- éƒ¨åˆ†æˆåŠŸçš„ä¼˜é›…é™çº§

### é”™è¯¯åˆ†ç±»
- **è¾“å…¥é”™è¯¯**: å‚æ•°æ ¼å¼æˆ–å€¼ä¸æ­£ç¡®
- **æœåŠ¡é”™è¯¯**: å­æœåŠ¡è°ƒç”¨å¤±è´¥
- **ç³»ç»Ÿé”™è¯¯**: ç½‘ç»œæˆ–èµ„æºå¼‚å¸¸
- **ä¸šåŠ¡é”™è¯¯**: ä¸šåŠ¡é€»è¾‘å¤„ç†å¤±è´¥

## æ—¥å¿—è®°å½•

### æ“ä½œæ—¥å¿—
- è¯¦ç»†çš„åè°ƒæµç¨‹è®°å½•
- å­æœåŠ¡è°ƒç”¨çŠ¶æ€è·Ÿè¸ª
- æ€§èƒ½æŒ‡æ ‡å’Œè€—æ—¶ç»Ÿè®¡

### ä¸šåŠ¡ç›‘æ§
- æˆåŠŸç‡ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ
- çƒ­é—¨ç‰©å“ç±»åˆ«ç»Ÿè®¡
- ç”¨æˆ·è¡Œä¸ºæ¨¡å¼åˆ†æ

### é”™è¯¯è¿½è¸ª
- å®Œæ•´çš„é”™è¯¯å †æ ˆä¿¡æ¯
- å¤±è´¥åŸå› åˆ†ç±»ç»Ÿè®¡
- æœåŠ¡è´¨é‡ç›‘æ§æŒ‡æ ‡

## æµ‹è¯•è¦†ç›–

### åŠŸèƒ½æµ‹è¯•
- å®Œæ•´åè°ƒæµç¨‹æµ‹è¯•
- å¹¶è¡Œå’Œä¸²è¡Œæ¨¡å¼å¯¹æ¯”
- é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶æµ‹è¯•
- ç»„ä»¶çŠ¶æ€ç®¡ç†æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- å“åº”æ—¶é—´åŸºå‡†æµ‹è¯•
- å¹¶å‘å¤„ç†èƒ½åŠ›æµ‹è¯•
- å†…å­˜ä½¿ç”¨å’Œèµ„æºç®¡ç†æµ‹è¯•

### é›†æˆæµ‹è¯•
- å­Agenté›†æˆæµ‹è¯•
- å¤–éƒ¨æœåŠ¡ä¾èµ–æµ‹è¯•
- ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹æµ‹è¯•

## ä¾¿æ·åŠŸèƒ½

### å¿«æ·æ–¹æ³•
- `coordinate_recycling_donation()`: å…¨å±€ä¾¿æ·å‡½æ•°
- `get_component_status()`: ç»„ä»¶çŠ¶æ€æ£€æŸ¥
- `to_dict()`: ç»“æœåºåˆ—åŒ–

### ä¸Šä¸‹æ–‡ç®¡ç†
- è‡ªåŠ¨èµ„æºç®¡ç†å’Œæ¸…ç†
- å¼‚æ­¥ä¸Šä¸‹æ–‡æ”¯æŒ
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œæ¢å¤

### æ•°æ®è½¬æ¢
- æ ‡å‡†åŒ–çš„å“åº”æ ¼å¼
- JSONåºåˆ—åŒ–æ”¯æŒ
- å‰ç«¯å‹å¥½çš„æ•°æ®ç»“æ„ 