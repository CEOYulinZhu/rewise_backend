# äºŒæ‰‹äº¤æ˜“å¹³å°åè°ƒå™¨Agent

## æ¦‚è¿°

äºŒæ‰‹äº¤æ˜“å¹³å°åè°ƒå™¨Agentæ˜¯ä¸€ä¸ªä¸“ä¸šçš„äºŒæ‰‹äº¤æ˜“æœåŠ¡ç»Ÿä¸€åè°ƒç³»ç»Ÿï¼Œè´Ÿè´£æ•´åˆäºŒæ‰‹å¹³å°æœç´¢å’Œäº¤æ˜“æ–‡æ¡ˆç”Ÿæˆä¸¤ä¸ªå­æœåŠ¡ï¼Œä¸ºç”¨æˆ·æä¾›å®Œæ•´çš„äºŒæ‰‹äº¤æ˜“è§£å†³æ–¹æ¡ˆã€‚è¯¥Agentå¼‚æ­¥è°ƒç”¨äºŒæ‰‹å¹³å°æœç´¢Agentå’Œæ–‡æ¡ˆç”ŸæˆAgentï¼Œå°†ç»“æœè¿›è¡Œæ™ºèƒ½æ•´åˆå’Œç»Ÿä¸€å±•ç¤ºã€‚

## æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ç»Ÿä¸€åè°ƒç®¡ç†
- **åŒå‘æœåŠ¡æ•´åˆ**ï¼šåŒæ—¶è·å–äºŒæ‰‹å¹³å°æœç´¢ç»“æœå’Œäº¤æ˜“æ–‡æ¡ˆï¼Œæä¾›å…¨æ–¹ä½äº¤æ˜“æ”¯æŒ
- **æ™ºèƒ½è·¯ç”±åˆ†å‘**ï¼šæ ¹æ®ç‰©å“ç±»å‹è‡ªåŠ¨é€‰æ‹©æœ€ä¼˜çš„æœç´¢ç­–ç•¥å’Œæ–‡æ¡ˆé£æ ¼
- **ç»“æœæ ‡å‡†åŒ–**ï¼šç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼Œä¾¿äºå‰ç«¯å±•ç¤ºå’Œä¸šåŠ¡å¤„ç†
- **å®¹é”™å¤„ç†**ï¼šå•ä¸€æœåŠ¡å¤±è´¥ä¸å½±å“æ•´ä½“ç»“æœï¼Œç¡®ä¿æœåŠ¡å¯ç”¨æ€§

### âš¡ é«˜æ€§èƒ½å¤„ç†
- **å¹¶è¡Œæ‰§è¡Œ**ï¼šå¹³å°æœç´¢å’Œæ–‡æ¡ˆç”ŸæˆåŒæ—¶æ‰§è¡Œï¼Œå¤§å¹…æå‡å“åº”é€Ÿåº¦
- **ä¸²è¡Œå¤‡ç”¨**ï¼šæ”¯æŒä¸²è¡Œæ¨¡å¼ï¼Œé€‚åº”ä¸åŒçš„ç½‘ç»œå’Œç³»ç»Ÿç¯å¢ƒ
- **è‡ªé€‚åº”è°ƒåº¦**ï¼šæ ¹æ®ç³»ç»Ÿè´Ÿè½½å’Œé…ç½®æ™ºèƒ½é€‰æ‹©æ‰§è¡Œæ¨¡å¼
- **èµ„æºä¼˜åŒ–**ï¼šç»Ÿä¸€ç®¡ç†å­Agentèµ„æºï¼Œé¿å…é‡å¤åˆå§‹åŒ–

### ğŸ“Š å®Œæ•´æ•°æ®æ•´åˆ
- **æœç´¢ç»“æœæ•°æ®**ï¼šé—²é±¼ã€çˆ±å›æ”¶ç­‰å¹³å°çš„å•†å“ä¿¡æ¯ã€ä»·æ ¼ç»Ÿè®¡
- **æ–‡æ¡ˆç”Ÿæˆæ•°æ®**ï¼šAIç”Ÿæˆçš„æ ‡é¢˜ã€æè¿°æ–‡æ¡ˆï¼Œé€‚åˆå‘å¸ƒäº¤æ˜“ä¿¡æ¯
- **å¤„ç†å…ƒæ•°æ®**ï¼šæ‰§è¡Œæ¨¡å¼ã€è€—æ—¶ç»Ÿè®¡ã€æˆåŠŸç‡è·Ÿè¸ª
- **é”™è¯¯è¿½è¸ª**ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤±è´¥åŸå› åˆ†æ

### ğŸ”„ æ™ºèƒ½å®¹é”™æœºåˆ¶
- **éƒ¨åˆ†æˆåŠŸç­–ç•¥**ï¼šè‡³å°‘ä¸€ä¸ªå­æœåŠ¡æˆåŠŸå³è¿”å›æˆåŠŸç»“æœ
- **é”™è¯¯éš”ç¦»**ï¼šå­æœåŠ¡é”™è¯¯ä¸ä¼šå½±å“å…¶ä»–æœåŠ¡çš„æ­£å¸¸æ‰§è¡Œ
- **è¯¦ç»†é”™è¯¯æŠ¥å‘Š**ï¼šç²¾ç¡®å®šä½å¤±è´¥åŸå› ï¼Œä¾¿äºé—®é¢˜æ’æŸ¥
- **æœåŠ¡é™çº§**ï¼šå…³é”®æœåŠ¡å¤±è´¥æ—¶è‡ªåŠ¨å¯ç”¨å¤‡ç”¨æ–¹æ¡ˆ

## æ¶æ„è®¾è®¡

### ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–
- **å¼‚æ­¥åç¨‹**ï¼šå…¨ç¨‹ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼Œæ”¯æŒé«˜å¹¶å‘è¯·æ±‚
- **å¹¶è¡Œä»»åŠ¡è°ƒåº¦**ï¼šä½¿ç”¨asyncio.gatherå®ç°çœŸæ­£çš„å¹¶è¡Œæ‰§è¡Œ
- **èµ„æºæ± ç®¡ç†**ï¼šç»Ÿä¸€ç®¡ç†HTTPè¿æ¥å’ŒAIæ¨¡å‹è°ƒç”¨
- **å†…å­˜ä¼˜åŒ–**ï¼šåŠæ—¶é‡Šæ”¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼

### ğŸ”§ å¯ç»´æŠ¤æ€§
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¸…æ™°çš„èŒè´£åˆ†ç¦»ï¼Œæ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **æ ‡å‡†æ¥å£**ï¼šç»Ÿä¸€çš„è¾“å…¥è¾“å‡ºæ ¼å¼ï¼Œä¾¿äºé›†æˆ
- **å…¨é¢æµ‹è¯•**ï¼šå®Œæ•´çš„å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•è¦†ç›–
- **è¯¦ç»†æ—¥å¿—**ï¼šå®Œæ•´çš„æ‰§è¡Œè½¨è¿¹å’Œæ€§èƒ½ç›‘æ§

## è¾“å…¥è¾“å‡ºè§„èŒƒ

### è¾“å…¥æ ¼å¼

```python
# ç‰©å“åˆ†æç»“æœ
analysis_result = {
    "category": "ç”µå­äº§å“",              # å¿…éœ€ï¼šç‰©å“ä¸»ç±»åˆ«
    "sub_category": "æ™ºèƒ½æ‰‹æœº",         # å¯é€‰ï¼šç‰©å“å­ç±»åˆ«
    "brand": "è‹¹æœ",                    # å¯é€‰ï¼šå“ç‰Œä¿¡æ¯
    "model": "iPhone 12",               # å¯é€‰ï¼šå‹å·ä¿¡æ¯
    "condition": "å…«æˆæ–°",              # å¿…éœ€ï¼šç‰©å“çŠ¶æ€
    "description": "iPhone 12ï¼Œé»‘è‰²ï¼Œ128GB", # å¿…éœ€ï¼šè¯¦ç»†æè¿°
    "keywords": ["æ‰‹æœº", "iPhone"],     # å¯é€‰ï¼šå…³é”®è¯åˆ—è¡¨
}

# è°ƒç”¨å‚æ•°
max_results_per_platform = 10           # å¯é€‰ï¼šæ¯ä¸ªå¹³å°æœ€å¤§è¿”å›ç»“æœæ•°
include_xianyu = True                    # å¯é€‰ï¼šæ˜¯å¦åŒ…å«é—²é±¼æœç´¢
include_aihuishou = True                 # å¯é€‰ï¼šæ˜¯å¦åŒ…å«çˆ±å›æ”¶æœç´¢
enable_parallel = True                   # å¯é€‰ï¼šæ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†
```

### è¾“å‡ºæ ¼å¼

```python
{
    "success": True,                     # åè°ƒæ˜¯å¦æˆåŠŸ
    "source": "secondhand_trading_coordinator", # æ•°æ®æ¥æºæ ‡è¯†
    "analysis_result": {...},            # è¾“å…¥çš„åˆ†æç»“æœå›æ˜¾
    
    # äºŒæ‰‹å¹³å°æœç´¢ç»“æœ
    "search_result": {
        "success": True,
        "result": {
            "total_products": 15,
            "products": [
                {
                    "platform": "é—²é±¼",
                    "title": "iPhone 12 é»‘è‰² 128GB",
                    "seller": "å¼ ä¸‰",
                    "price": 4500,
                    "image_url": "https://...",
                    "location": "åŒ—äº¬"
                }
            ],
            "platform_stats": {
                "xianyu": {
                    "success": True,
                    "product_count": 10,
                    "price_stats": {...}
                },
                "aihuishou": {
                    "success": True,
                    "product_count": 5,
                    "price_stats": {...}
                }
            }
        }
    },
    
    # äº¤æ˜“æ–‡æ¡ˆç”Ÿæˆç»“æœ
    "content_result": {
        "success": True,
        "content_result": {
            "title": "è‹¹æœiPhone 12 é»‘è‰²128GB å…«æˆæ–° è¯šä¿¡å‡ºå”®",
            "description": "å‡ºå”®iPhone 12ä¸€å°ï¼Œé»‘è‰²128GBï¼Œä½¿ç”¨ä¸¤å¹´..."
        },
        "generation_source": "ai"        # aiæˆ–fallback
    },
    
    # å¤„ç†å…ƒæ•°æ®
    "processing_metadata": {
        "processing_mode": "parallel",    # å¤„ç†æ¨¡å¼
        "processing_time_seconds": 4.2,  # æ€»è€—æ—¶
        "search_success": True,          # æœç´¢æ˜¯å¦æˆåŠŸ
        "content_success": True,         # æ–‡æ¡ˆç”Ÿæˆæ˜¯å¦æˆåŠŸ
        "search_error": None,            # æœç´¢é”™è¯¯ä¿¡æ¯
        "content_error": None            # æ–‡æ¡ˆé”™è¯¯ä¿¡æ¯
    },
    
    "error": None                        # é”™è¯¯ä¿¡æ¯
}
```

## æ ¸å¿ƒæ–¹æ³•

### `coordinate_trading()`

åè°ƒäºŒæ‰‹äº¤æ˜“æ¨èçš„æ ¸å¿ƒæ–¹æ³•ï¼Œæ•´åˆå¹³å°æœç´¢å’Œæ–‡æ¡ˆç”ŸæˆæœåŠ¡ã€‚

**å‚æ•°ï¼š**
- `analysis_result`: ç‰©å“åˆ†æç»“æœå­—å…¸
- `max_results_per_platform`: æ¯ä¸ªå¹³å°æœ€å¤§è¿”å›ç»“æœæ•°ï¼Œé»˜è®¤10
- `include_xianyu`: æ˜¯å¦åŒ…å«é—²é±¼æœç´¢ï¼Œé»˜è®¤True
- `include_aihuishou`: æ˜¯å¦åŒ…å«çˆ±å›æ”¶æœç´¢ï¼Œé»˜è®¤True
- `enable_parallel`: æ˜¯å¦å¯ç”¨å¹¶è¡Œå¤„ç†ï¼Œé»˜è®¤True

**è¿”å›ï¼š**
- `SecondhandTradingResponse`: æ•´åˆçš„åè°ƒå™¨å“åº”å¯¹è±¡

**å·¥ä½œæµç¨‹ï¼š**
1. **è¾“å…¥éªŒè¯**ï¼šæ£€æŸ¥åˆ†æç»“æœçš„æœ‰æ•ˆæ€§å’Œå®Œæ•´æ€§
2. **å¹¶è¡Œ/ä¸²è¡Œè°ƒåº¦**ï¼šæ ¹æ®é…ç½®é€‰æ‹©æ‰§è¡Œæ¨¡å¼
3. **å­æœåŠ¡è°ƒç”¨**ï¼šå¼‚æ­¥è°ƒç”¨æœç´¢å’Œæ–‡æ¡ˆç”ŸæˆAgent
4. **ç»“æœæ•´åˆ**ï¼šåˆå¹¶ä¸¤ä¸ªæœåŠ¡çš„ç»“æœå¹¶ç”Ÿæˆå…ƒæ•°æ®
5. **å“åº”å°è£…**ï¼šè¿”å›æ ‡å‡†åŒ–çš„åè°ƒå™¨å“åº”

## ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ä½¿ç”¨

```python
from app.agents.secondhand_coordinator import SecondhandTradingAgent

# å‡†å¤‡åˆ†æç»“æœ
analysis_result = {
    "category": "ç”µå­äº§å“",
    "sub_category": "æ™ºèƒ½æ‰‹æœº",
    "brand": "è‹¹æœ",
    "model": "iPhone 12",
    "condition": "å…«æˆæ–°",
    "description": "iPhone 12ï¼Œé»‘è‰²ï¼Œ128GBï¼Œä½¿ç”¨ä¸¤å¹´ï¼Œå¤–è§‚è‰¯å¥½ï¼ŒåŠŸèƒ½æ­£å¸¸",
    "keywords": ["iPhone", "è‹¹æœ", "æ‰‹æœº", "äºŒæ‰‹"]
}

# è·å–å®Œæ•´äº¤æ˜“æ”¯æŒ
async with SecondhandTradingAgent() as coordinator:
    response = await coordinator.coordinate_trading(
        analysis_result=analysis_result,
        max_results_per_platform=10,
        include_xianyu=True,
        include_aihuishou=True,
        enable_parallel=True
    )
    
    if response.success:
        print(f"ğŸ¯ åè°ƒæˆåŠŸ!")
        
        # è·å–å¤„ç†æ‘˜è¦
        summary = response.get_processing_summary()
        print(f"ğŸ“Š å¤„ç†æ‘˜è¦: {summary}")
        
        # æ£€æŸ¥æœç´¢ç»“æœ
        if response.has_search_results():
            total_products = response.get_total_products()
            print(f"ğŸ” æ‰¾åˆ° {total_products} ä¸ªç›¸å…³å•†å“")
            
            # è·å–æœç´¢ç»“æœè¯¦æƒ…
            search_data = response.search_result.get("result", {})
            products = search_data.get("products", [])
            
            for product in products[:3]:  # æ˜¾ç¤ºå‰3ä¸ª
                print(f"  ğŸ“± {product['title']} - Â¥{product['price']} ({product['platform']})")
        
        # æ£€æŸ¥æ–‡æ¡ˆç»“æœ
        if response.has_content_results():
            title = response.get_generated_title()
            description = response.get_generated_description()
            print(f"ğŸ“ ç”Ÿæˆæ ‡é¢˜: {title}")
            print(f"ğŸ“ ç”Ÿæˆæè¿°: {description[:100]}...")
    
    else:
        print(f"âŒ åè°ƒå¤±è´¥: {response.error}")
```

### æ€§èƒ½å¯¹æ¯”æµ‹è¯•

```python
async def performance_comparison():
    """æ¯”è¾ƒä¸²è¡Œä¸å¹¶è¡Œå¤„ç†æ€§èƒ½"""
    
    analysis_result = {
        "category": "æœè£…é…é¥°",
        "description": "ä¼˜è¡£åº“ç¾½ç»’æœï¼Œä¹æˆæ–°"
    }
    
    async with SecondhandTradingAgent() as coordinator:
        
        # ä¸²è¡Œå¤„ç†
        start_time = time.time()
        serial_result = await coordinator.coordinate_trading(
            analysis_result=analysis_result,
            enable_parallel=False
        )
        serial_time = time.time() - start_time
        
        # å¹¶è¡Œå¤„ç†
        start_time = time.time()
        parallel_result = await coordinator.coordinate_trading(
            analysis_result=analysis_result,
            enable_parallel=True
        )
        parallel_time = time.time() - start_time
        
        # æ€§èƒ½åˆ†æ
        if serial_time > 0 and parallel_time > 0:
            speedup = serial_time / parallel_time
            print(f"âš¡ å¹¶è¡Œæ€§èƒ½æå‡: {speedup:.2f}x")
            print(f"â±ï¸ æ—¶é—´èŠ‚çœ: {(serial_time - parallel_time):.2f}ç§’")
```

### ç»“æœè¯¦ç»†å¤„ç†

```python
async def detailed_result_processing(response):
    """è¯¦ç»†å¤„ç†åè°ƒå™¨ç»“æœ"""
    
    if not response.success:
        print(f"âŒ å¤„ç†å¤±è´¥: {response.error}")
        return
    
    # å¤„ç†æœç´¢ç»“æœ
    if response.has_search_results():
        search_result = response.search_result.get("result", {})
        total_products = search_result.get("total_products", 0)
        products = search_result.get("products", [])
        
        print(f"ğŸ” æœç´¢ç»“æœ: æ€»å…±æ‰¾åˆ° {total_products} ä¸ªå•†å“")
        
        # æŒ‰å¹³å°åˆ†ç»„æ˜¾ç¤º
        platform_groups = {}
        for product in products:
            platform = product.get("platform", "æœªçŸ¥")
            if platform not in platform_groups:
                platform_groups[platform] = []
            platform_groups[platform].append(product)
        
        for platform, platform_products in platform_groups.items():
            print(f"  ğŸ“± {platform}: {len(platform_products)}ä¸ªå•†å“")
            for product in platform_products[:2]:  # æ¯ä¸ªå¹³å°æ˜¾ç¤ºå‰2ä¸ª
                price = product.get("price", 0)
                title = product.get("title", "")[:30]
                print(f"    - {title}... (Â¥{price})")
        
        # ä»·æ ¼ç»Ÿè®¡
        platform_stats = search_result.get("platform_stats", {})
        for platform, stats in platform_stats.items():
            if stats.get("success") and stats.get("price_stats"):
                price_stats = stats["price_stats"]
                price_range = price_stats.get("price_range", "")
                print(f"  ğŸ’° {platform}ä»·æ ¼åŒºé—´: {price_range}")
    
    # å¤„ç†æ–‡æ¡ˆç»“æœ
    if response.has_content_results():
        title = response.get_generated_title()
        description = response.get_generated_description()
        generation_source = response.content_result.generation_source
        
        print(f"ğŸ“ æ–‡æ¡ˆç”Ÿæˆ ({generation_source}):")
        print(f"  æ ‡é¢˜: {title}")
        print(f"  æè¿°: {description}")
```

### æ‰¹é‡å¤„ç†

```python
async def batch_coordination(items_list):
    """æ‰¹é‡å¤„ç†å¤šä¸ªç‰©å“çš„äºŒæ‰‹äº¤æ˜“æ¨è"""
    
    results = []
    
    async with SecondhandTradingAgent() as coordinator:
        for analysis_result in items_list:
            try:
                result = await coordinator.coordinate_trading(
                    analysis_result=analysis_result,
                    max_results_per_platform=5  # æ‰¹é‡å¤„ç†æ—¶å‡å°‘æ•°é‡
                )
                results.append(result)
                
                # ç®€å•ç»Ÿè®¡
                success_msg = "âœ…" if result.success else "âŒ"
                item_desc = analysis_result.get("description", "æœªçŸ¥ç‰©å“")[:20]
                total_products = result.get_total_products() if result.has_search_results() else 0
                has_content = "æœ‰æ–‡æ¡ˆ" if result.has_content_results() else "æ— æ–‡æ¡ˆ"
                
                print(f"{success_msg} {item_desc}... - {total_products}ä¸ªå•†å“, {has_content}")
                
            except Exception as e:
                print(f"âŒ å¤„ç†å¤±è´¥: {e}")
                results.append(None)
    
    return results
```

## å¹¶è¡Œå¤„ç†æœºåˆ¶

### æ‰§è¡Œæ¨¡å¼å¯¹æ¯”

#### å¹¶è¡Œæ¨¡å¼ (enable_parallel=True)
- **æ‰§è¡Œæ–¹å¼**ï¼šå¹³å°æœç´¢å’Œæ–‡æ¡ˆç”ŸæˆåŒæ—¶è¿›è¡Œ
- **æ€§èƒ½**ï¼šæ˜¾è‘—æå‡å“åº”é€Ÿåº¦ï¼Œé€šå¸¸å¯è·å¾—1.5-2xæ€§èƒ½æå‡
- **é€‚ç”¨åœºæ™¯**ï¼šç½‘ç»œæ¡ä»¶è‰¯å¥½ï¼Œç³»ç»Ÿèµ„æºå……è¶³
- **é£é™©**ï¼šå•ç‚¹æ•…éšœå¯èƒ½å½±å“æ•´ä½“ç¨³å®šæ€§

#### ä¸²è¡Œæ¨¡å¼ (enable_parallel=False)
- **æ‰§è¡Œæ–¹å¼**ï¼šå…ˆæ‰§è¡Œå¹³å°æœç´¢ï¼Œå†æ‰§è¡Œæ–‡æ¡ˆç”Ÿæˆ
- **æ€§èƒ½**ï¼šå“åº”æ—¶é—´è¾ƒé•¿ï¼Œä½†ç¨³å®šå¯é 
- **é€‚ç”¨åœºæ™¯**ï¼šç½‘ç»œä¸ç¨³å®šï¼Œç³»ç»Ÿèµ„æºå—é™
- **ä¼˜åŠ¿**ï¼šé”™è¯¯éš”ç¦»æ€§å¥½ï¼Œä¾¿äºé—®é¢˜å®šä½

### å®¹é”™æœºåˆ¶

#### éƒ¨åˆ†æˆåŠŸå¤„ç†
```python
# ç¤ºä¾‹ï¼šæœç´¢æˆåŠŸï¼Œæ–‡æ¡ˆç”Ÿæˆå¤±è´¥
{
    "success": True,  # è‡³å°‘ä¸€ä¸ªæˆåŠŸå³ä¸ºTrue
    "search_result": {...},           # æˆåŠŸçš„æ•°æ®
    "content_result": None,           # å¤±è´¥æ—¶ä¸ºNone
    "processing_metadata": {
        "search_success": True,
        "content_success": False,
        "search_error": None,
        "content_error": "AIæœåŠ¡è¶…æ—¶"
    }
}
```

#### å®Œå…¨å¤±è´¥å¤„ç†
```python
# ç¤ºä¾‹ï¼šä¸¤ä¸ªæœåŠ¡éƒ½å¤±è´¥
{
    "success": False,
    "error": "æœç´¢å¤±è´¥: ç½‘ç»œå¼‚å¸¸; æ–‡æ¡ˆç”Ÿæˆå¤±è´¥: AIæœåŠ¡å¼‚å¸¸",
    "search_result": None,
    "content_result": None
}
```

## å“åº”æ•°æ®ç»“æ„

### ä¸»è¦å“åº”å¯¹è±¡

#### SecondhandTradingResponse
```python
@dataclass
class SecondhandTradingResponse:
    success: bool                                    # åè°ƒæ˜¯å¦æˆåŠŸ
    source: str = "secondhand_trading_coordinator"  # æ•°æ®æ¥æº
    analysis_result: Optional[Dict[str, Any]]       # åŸå§‹åˆ†æç»“æœ
    search_result: Optional[Dict[str, Any]]         # æœç´¢ç»“æœ
    content_result: Optional[ContentGenerationResponse]  # æ–‡æ¡ˆç”Ÿæˆç»“æœ
    processing_metadata: Optional[SecondhandTradingProcessingMetadata]  # å¤„ç†å…ƒæ•°æ®
    error: Optional[str]                            # é”™è¯¯ä¿¡æ¯
```

### ä¾¿æ·æ–¹æ³•

#### çŠ¶æ€æ£€æŸ¥æ–¹æ³•
- `has_search_results()`: æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆæœç´¢ç»“æœ
- `has_content_results()`: æ£€æŸ¥æ˜¯å¦æœ‰æœ‰æ•ˆæ–‡æ¡ˆç»“æœ
- `get_total_products()`: è·å–æœç´¢åˆ°çš„æ€»å•†å“æ•°é‡
- `get_generated_title()`: è·å–ç”Ÿæˆçš„æ ‡é¢˜
- `get_generated_description()`: è·å–ç”Ÿæˆçš„æè¿°

#### æ•°æ®è·å–æ–¹æ³•
- `get_processing_summary()`: è·å–å¤„ç†æ‘˜è¦ä¿¡æ¯
- `to_dict()`: è½¬æ¢ä¸ºå­—å…¸æ ¼å¼

## é…ç½®è¦æ±‚

### ç¯å¢ƒå˜é‡
```bash
# è“å¿ƒå¤§æ¨¡å‹é…ç½® (æ–‡æ¡ˆç”Ÿæˆéœ€è¦)
LANXIN_APP_ID=your_app_id
LANXIN_APP_KEY=your_app_key
LANXIN_API_BASE_URL=https://api.xxx.com/v1/chat/completions
LANXIN_TEXT_MODEL=your_text_model

# é—²é±¼æœç´¢é…ç½® (å¹³å°æœç´¢éœ€è¦)
# çˆ±å›æ”¶æœç´¢é…ç½® (å¹³å°æœç´¢éœ€è¦)
```

### ä¾èµ–æœåŠ¡
- **äºŒæ‰‹å¹³å°æœç´¢Agent**: è´Ÿè´£é—²é±¼ã€çˆ±å›æ”¶ç­‰å¹³å°çš„å•†å“æœç´¢
- **æ–‡æ¡ˆç”ŸæˆAgent**: è´Ÿè´£AIé©±åŠ¨çš„äº¤æ˜“æ–‡æ¡ˆç”Ÿæˆ
- **è“å¿ƒå¤§æ¨¡å‹API**: æä¾›AIåˆ†æå’Œç”Ÿæˆèƒ½åŠ›
- **å¤–éƒ¨å¹³å°API**: æä¾›å•†å“æœç´¢æœåŠ¡

## ä¾èµ–æ¨¡å—

- **å­Agentæ¨¡å—**ï¼š
  - `app.agents.secondhand_search.agent.SecondhandSearchAgent`
  - `app.agents.content_generation.agent.ContentGenerationAgent`
- **æ•°æ®æ¨¡å‹**ï¼š
  - `app.models.secondhand_trading_models`
  - `app.models.secondhand_search_models`
  - `app.models.content_generation_models`
- **æ ¸å¿ƒæœåŠ¡**ï¼š
  - `app.core.config`: é…ç½®ç®¡ç†
  - `app.core.logger`: æ—¥å¿—ç³»ç»Ÿ

## æ€§èƒ½ç‰¹ç‚¹

### å“åº”é€Ÿåº¦
- **å¹¶è¡Œæ¨¡å¼**: é€šå¸¸4-6ç§’å®Œæˆå®Œæ•´åè°ƒ
- **ä¸²è¡Œæ¨¡å¼**: é€šå¸¸6-10ç§’å®Œæˆå®Œæ•´åè°ƒ
- **å•ä¸€æœåŠ¡**: 2-5ç§’å®Œæˆå•é¡¹æœåŠ¡
- **é”™è¯¯å¤„ç†**: 1ç§’å†…è¿”å›é”™è¯¯å“åº”

### å‡†ç¡®ç‡
- **æœç´¢ç»“æœè´¨é‡**: 85%+ (åŸºäºå¹³å°APIæ•°æ®)
- **æ–‡æ¡ˆç”Ÿæˆè´¨é‡**: 90%+ (åŸºäºAIç”Ÿæˆèƒ½åŠ›)
- **æ•´ä½“æˆåŠŸç‡**: 80%+ (è‡³å°‘ä¸€é¡¹æˆåŠŸ)
- **æ•°æ®å®Œæ•´æ€§**: 95%+ (å“åº”ç»“æ„å®Œæ•´æ€§)

### å¹¶å‘æ”¯æŒ
- **å¼‚æ­¥è®¾è®¡**: æ”¯æŒé«˜å¹¶å‘è¯·æ±‚å¤„ç†
- **èµ„æºç®¡ç†**: ç»Ÿä¸€ç®¡ç†å­Agentèµ„æº
- **è¿æ¥å¤ç”¨**: é«˜æ•ˆçš„HTTPè¿æ¥ç®¡ç†
- **å†…å­˜ä¼˜åŒ–**: åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„èµ„æº

## ä¸šåŠ¡åœºæ™¯

### é€‚ç”¨åœºæ™¯
- **é—²ç½®ç‰©å“å‡ºå”®**: ä¸ºç”¨æˆ·æä¾›å¸‚åœºä»·æ ¼å‚è€ƒå’Œå‘å¸ƒæ–‡æ¡ˆ
- **ä»·æ ¼è¯„ä¼°**: å¸®åŠ©ç”¨æˆ·äº†è§£ç‰©å“çš„å¸‚åœºä»·å€¼
- **äº¤æ˜“æ–‡æ¡ˆ**: ç”Ÿæˆå¸å¼•äººçš„äº¤æ˜“æ ‡é¢˜å’Œæè¿°
- **å¹³å°é€‰æ‹©**: æ¨èæœ€é€‚åˆçš„äºŒæ‰‹äº¤æ˜“å¹³å°

### å…¸å‹ç”¨æˆ·è·¯å¾„
1. **ç‰©å“åˆ†æ**: ç”¨æˆ·ä¸Šä¼ ç‰©å“ä¿¡æ¯ï¼Œç³»ç»Ÿè¯†åˆ«ç±»åˆ«å’ŒçŠ¶æ€
2. **åè°ƒå¤„ç†**: è°ƒç”¨åè°ƒå™¨è·å–æœç´¢ç»“æœå’Œæ–‡æ¡ˆå»ºè®®
3. **ç»“æœå±•ç¤º**: å‰ç«¯å±•ç¤ºå•†å“ä»·æ ¼å’Œæ¨èæ–‡æ¡ˆ
4. **ç”¨æˆ·é€‰æ‹©**: ç”¨æˆ·å‚è€ƒä»·æ ¼å’Œä½¿ç”¨ç”Ÿæˆçš„æ–‡æ¡ˆå‘å¸ƒäº¤æ˜“
5. **è·Ÿè¸ªåé¦ˆ**: è®°å½•ç”¨æˆ·è¡Œä¸ºï¼Œä¼˜åŒ–åç»­æ¨è

## ä¸å…¶ä»–æ¨¡å—åä½œ

### ä¸Šæ¸¸ä¾èµ–
- **å›¾ç‰‡è¯†åˆ«æœåŠ¡**: æä¾›ç‰©å“è§†è§‰åˆ†æç»“æœ
- **æ–‡æœ¬åˆ†ææœåŠ¡**: æä¾›æè¿°æ–‡æœ¬è§£æ
- **ç”¨æˆ·åå¥½æœåŠ¡**: æä¾›ç”¨æˆ·çš„äº¤æ˜“åå¥½ä¿¡æ¯

### ä¸‹æ¸¸è¾“å‡º
- **å‰ç«¯å±•ç¤º**: ç»Ÿä¸€çš„äº¤æ˜“æ”¯æŒç»“æœå±•ç¤º
- **ä¸šåŠ¡å†³ç­–**: æ”¯æŒç”¨æˆ·çš„äº¤æ˜“å†³ç­–
- **æ•°æ®åˆ†æ**: ä¸ºæ¨èç³»ç»Ÿä¼˜åŒ–æä¾›æ•°æ®
- **ç”¨æˆ·ç”»åƒ**: ä¸°å¯Œç”¨æˆ·è¡Œä¸ºç‰¹å¾

## é”™è¯¯å¤„ç†

### è¾“å…¥éªŒè¯
- åˆ†æç»“æœæ ¼å¼æ£€æŸ¥å’Œå¿…éœ€å­—æ®µéªŒè¯
- å‚æ•°èŒƒå›´å’Œç±»å‹æ£€æŸ¥
- ä¸šåŠ¡é€»è¾‘éªŒè¯

### æœåŠ¡å®¹é”™
- å­æœåŠ¡å¼‚å¸¸éš”ç¦»å’Œé”™è¯¯æ¢å¤
- ç½‘ç»œè¶…æ—¶å’Œé‡è¯•æœºåˆ¶
- éƒ¨åˆ†æˆåŠŸçš„ä¼˜é›…é™çº§

### é”™è¯¯åˆ†ç±»
- **è¾“å…¥é”™è¯¯**: å‚æ•°æ ¼å¼æˆ–å€¼ä¸æ­£ç¡®
- **æœåŠ¡é”™è¯¯**: å­æœåŠ¡è°ƒç”¨å¤±è´¥
- **ç½‘ç»œé”™è¯¯**: å¤–éƒ¨APIè°ƒç”¨å¼‚å¸¸
- **ä¸šåŠ¡é”™è¯¯**: ä¸šåŠ¡é€»è¾‘å¤„ç†å¤±è´¥

## æ—¥å¿—è®°å½•

### æ“ä½œæ—¥å¿—
- è¯¦ç»†çš„åè°ƒæµç¨‹è®°å½•
- å­æœåŠ¡è°ƒç”¨çŠ¶æ€è·Ÿè¸ª
- æ€§èƒ½æŒ‡æ ‡å’Œè€—æ—¶ç»Ÿè®¡

### ä¸šåŠ¡ç›‘æ§
- æˆåŠŸç‡ç»Ÿè®¡å’Œè¶‹åŠ¿åˆ†æ
- çƒ­é—¨ç‰©å“ç±»åˆ«ç»Ÿè®¡
- ç”¨æˆ·è¡Œä¸ºæ¨¡å¼åˆ†æ

### é”™è¯¯è¿½è¸ª
- å®Œæ•´çš„é”™è¯¯å †æ ˆä¿¡æ¯
- å¤±è´¥åŸå› åˆ†ç±»ç»Ÿè®¡
- æœåŠ¡è´¨é‡ç›‘æ§æŒ‡æ ‡

## æµ‹è¯•è¦†ç›–

### åŠŸèƒ½æµ‹è¯•
- å®Œæ•´åè°ƒæµç¨‹æµ‹è¯•
- å¹¶è¡Œå’Œä¸²è¡Œæ¨¡å¼å¯¹æ¯”
- é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæ¡ä»¶æµ‹è¯•
- ç»„ä»¶çŠ¶æ€ç®¡ç†æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- å“åº”æ—¶é—´åŸºå‡†æµ‹è¯•
- å¹¶å‘å¤„ç†èƒ½åŠ›æµ‹è¯•
- å†…å­˜ä½¿ç”¨å’Œèµ„æºç®¡ç†æµ‹è¯•

### é›†æˆæµ‹è¯•
- å­Agenté›†æˆæµ‹è¯•
- å¤–éƒ¨æœåŠ¡ä¾èµ–æµ‹è¯•
- ç«¯åˆ°ç«¯ä¸šåŠ¡æµç¨‹æµ‹è¯•

## ä¾¿æ·åŠŸèƒ½

### å¿«æ·æ–¹æ³•
- `coordinate_secondhand_trading()`: å…¨å±€ä¾¿æ·å‡½æ•°
- `get_component_status()`: ç»„ä»¶çŠ¶æ€æ£€æŸ¥
- `to_dict()`: ç»“æœåºåˆ—åŒ–

### ä¸Šä¸‹æ–‡ç®¡ç†
- è‡ªåŠ¨èµ„æºç®¡ç†å’Œæ¸…ç†
- å¼‚æ­¥ä¸Šä¸‹æ–‡æ”¯æŒ
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œæ¢å¤

### æ•°æ®è½¬æ¢
- æ ‡å‡†åŒ–çš„å“åº”æ ¼å¼
- JSONåºåˆ—åŒ–æ”¯æŒ
- å‰ç«¯å‹å¥½çš„æ•°æ®ç»“æ„

é¡¹ç›®æä¾›äº†å®Œæ•´çš„æµ‹è¯•è¦†ç›–ï¼ŒåŒ…æ‹¬ï¼š
- åŸºç¡€åè°ƒåŠŸèƒ½æµ‹è¯•
- å¹¶è¡Œä¸ä¸²è¡Œå¤„ç†æ¨¡å¼å¯¹æ¯”
- é”™è¯¯å¤„ç†æµ‹è¯•
- æ€§èƒ½åŸºå‡†æµ‹è¯•
- å¹¶å‘å¤„ç†èƒ½åŠ›æµ‹è¯•

è¿è¡Œæµ‹è¯•ï¼š
```bash
pytest tests/agents/secondhand_coordinator/test_agent.py -v
``` 